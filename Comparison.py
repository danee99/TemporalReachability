import numpy as np
import heapq
import multiprocessing
import time
from queue import PriorityQueue
import os
import matplotlib.pyplot as plt
import scipy.stats as stats
from teneto import TemporalNetwork
from teneto import networkmeasures
from teneto import TenetoWorkflow


def import_edgelist(edge_list):
    edges = []
    with open(os.getcwd() + edge_list, "r") as f:
        n = int(f.readline())
        for line in f:
            arr = line.split()
            u = int(arr[0])
            v = int(arr[1])
            t = int(arr[2])
            try:
                l = int(arr[3])
            except IndexError:
                l = 1
            edges.append([u, v, t, l])
    return edges

tempreach = [0.0015673981191222097, 0.0015673981191222097, 0.0031347962382445305, 0.0026123301985371272, 0.0015673981191222097, 0.0026123301985371272, 0.002089864158829724, 0.0031347962382445305, 0.0026123301985371272, 0.002089864158829724, 0.0015673981191222097, 0.0026123301985371272, 0.002089864158829724, 0.002089864158829724, 0.0015673981191222097, 0.0031347962382445305, 0.0015673981191222097, 0.002089864158829724, 0.0010449320794148065, 0.002089864158829724, 0.002089864158829724, 0.002089864158829724, 0.002089864158829724, 0.0036572622779519337, 0.0026123301985371272, 0.002089864158829724, 0.0026123301985371272, 0.0026123301985371272, 0.0026123301985371272, 0.006792058516196464, 0.0026123301985371272, 0.004179728317659337, 0.014629049111807735, 0.005224660397074143, 0.006792058516196464, 0.006792058516196464, 0.0026123301985371272, 0.008881922675026077, 0.0031347962382445305, 0.006269592476489061, 0.005224660397074143, 0.009404388714733591, 0.00470219435736674, 0.005224660397074143, 0.00470219435736674, 0.005224660397074143, 0.00470219435736674, 0.005224660397074143, 0.002089864158829724, 0.0031347962382445305, 0.0031347962382445305, 0.005224660397074143, 0.004179728317659337, 0.0031347962382445305, 0.006792058516196464, 0.004179728317659337, 0.0031347962382445305, 0.002089864158829724, 0.002089864158829724, 0.005747126436781658, 0.002089864158829724, 0.002089864158829724, 0.0015673981191222097, 0.002089864158829724, 0.002089864158829724, 0.002089864158829724, 0.0031347962382445305, 0.002089864158829724, 0.0031347962382445305, 0.002089864158829724, 0.002089864158829724, 0.0015673981191222097, 0.002089864158829724, 0.0010449320794148065, 0.0015673981191222097, 0.0031347962382445305, 0.0015673981191222097, 0.0031347962382445305, 0.0015673981191222097, 0.0026123301985371272, 0.0031347962382445305, 0.002089864158829724, 0.0015673981191222097, 0.0010449320794148065, 0.0015673981191222097, 0.0026123301985371272, 0.0026123301985371272, 0.002089864158829724, 0.0026123301985371272, 0.002089864158829724, 0.0015673981191222097, 0.0010449320794148065, 0.0036572622779519337, 0.0026123301985371272, 0.0015673981191222097, 0.0026123301985371272, 0.0031347962382445305, 0.0031347962382445305, 0.005224660397074143, 0.002089864158829724, 0.0010449320794148065, 0.0010449320794148065, 0.002089864158829724, 0.004179728317659337, 0.006269592476489061, 0.0036572622779519337, 0.0031347962382445305, 0.004179728317659337, 0.0010449320794148065, 0.0036572622779519337, 0.005224660397074143, 0.00470219435736674, 0.005224660397074143, 0.009926854754440995, 0.00783699059561127, 0.006269592476489061, 0.00470219435736674, 0.0031347962382445305, 0.0031347962382445305, 0.0031347962382445305, 0.002089864158829724, 0.00470219435736674, 0.0026123301985371272, 0.0036572622779519337, 0.0026123301985371272, 0.002089864158829724, 0.0031347962382445305, 0.0010449320794148065, 0.0010449320794148065, 0.005747126436781658, 0.005224660397074143, 0.015151515151515138, 0.004179728317659337, 0.010449320794148398, 0.0010449320794148065, 0.0031347962382445305, 0.009404388714733591, 0.00470219435736674, 0.0031347962382445305, 0.00470219435736674, 0.005747126436781658, 0.006269592476489061, 0.008359456635318674, 0.006792058516196464, 0.006792058516196464, 0.005224660397074143, 0.005224660397074143, 0.006792058516196464, 0.0026123301985371272, 0.00470219435736674, 0.005224660397074143, 0.0015673981191222097, 0.006792058516196464, 0.008881922675026077, 0.00470219435736674, 0.0026123301985371272, 0.005747126436781658, 0.0015673981191222097, 0.0031347962382445305, 0.005224660397074143, 0.004179728317659337, 0.004179728317659337, 0.0036572622779519337, 0.00470219435736674, 0.00470219435736674, 0.005224660397074143, 0.0010449320794148065, 0.0036572622779519337, 0.010971786833855801, 0.0036572622779519337, 0.0010449320794148065, 0.0026123301985371272, 0.005747126436781658, 0.0010449320794148065, 0.004179728317659337, 0.004179728317659337, 0.006269592476489061, 0.009926854754440995, 0.0031347962382445305, 0.0010449320794148065, 0.002089864158829724, 0.0015673981191222097, 0.0010449320794148065, 0.0031347962382445305, 0.0010449320794148065, 0.0015673981191222097, 0.002089864158829724, 0.002089864158829724, 0.002089864158829724, 0.006269592476489061, 0.005747126436781658, 0.0026123301985371272, 0.002089864158829724, 0.0031347962382445305, 0.0026123301985371272, 0.002089864158829724, 0.002089864158829724, 0.0015673981191222097, 0.006269592476489061, 0.0031347962382445305, 0.0015673981191222097, 0.016196447230929945, 0.0026123301985371272, 0.002089864158829724, 0.006269592476489061, 0.005224660397074143, 0.0015673981191222097, 0.008881922675026077, 0.0015673981191222097, 0.004179728317659337, 0.006269592476489061, 0.012016718913270608, 0.0031347962382445305, 0.0031347962382445305, 0.0031347962382445305, 0.0036572622779519337, 0.0026123301985371272, 0.005747126436781658, 0.002089864158829724, 0.00470219435736674, 0.0010449320794148065, 0.0010449320794148065, 0.006269592476489061, 0.0010449320794148065, 0.0026123301985371272, 0.006792058516196464, 0.002089864158829724, 0.007314524555903867, 0.0015673981191222097, 0.008359456635318674, 0.008359456635318674, 0.0031347962382445305, 0.012016718913270608, 0.005224660397074143, 0.007314524555903867, 0.03396029258098221, 0.0036572622779519337, 0.009926854754440995, 0.017241379310344862, 0.008359456635318674, 0.00470219435736674, 0.002089864158829724, 0.0010449320794148065, 0.0015673981191222097, 0.0010449320794148065, 0.014629049111807735, 0.0036572622779519337, 0.009926854754440995, 0.0031347962382445305, 0.006792058516196464, 0.010449320794148398, 0.005747126436781658, 0.0026123301985371272, 0.0026123301985371272, 0.0026123301985371272, 0.006792058516196464, 0.008359456635318674, 0.005747126436781658, 0.006269592476489061, 0.008359456635318674, 0.008359456635318674, 0.008359456635318674, 0.009926854754440995, 0.006269592476489061, 0.006269592476489061, 0.006269592476489061, 0.00783699059561127, 0.007314524555903867, 0.008359456635318674, 0.011494252873563204, 0.0015673981191222097, 0.0015673981191222097, 0.002089864158829724, 0.00470219435736674, 0.0031347962382445305, 0.0010449320794148065, 0.0026123301985371272, 0.0026123301985371272, 0.00470219435736674, 0.0026123301985371272, 0.0026123301985371272, 0.0010449320794148065, 0.002089864158829724, 0.0036572622779519337, 0.0010449320794148065, 0.002089864158829724, 0.005747126436781658, 0.005224660397074143, 0.002089864158829724, 0.0031347962382445305, 0.0036572622779519337, 0.004179728317659337, 0.005224660397074143, 0.0036572622779519337, 0.00470219435736674, 0.0026123301985371272, 0.0010449320794148065, 0.005224660397074143, 0.00470219435736674, 0.0026123301985371272, 0.0010449320794148065, 0.0015673981191222097, 0.0026123301985371272, 0.0031347962382445305, 0.0015673981191222097, 0.002089864158829724, 0.002089864158829724, 0.0015673981191222097, 0.0010449320794148065, 0.00470219435736674, 0.0026123301985371272, 0.00470219435736674, 0.0031347962382445305, 0.004179728317659337, 0.0026123301985371272, 0.0031347962382445305, 0.0015673981191222097, 0.002089864158829724, 0.002089864158829724, 0.0010449320794148065, 0.00470219435736674, 0.0010449320794148065, 0.0026123301985371272, 0.0031347962382445305, 0.0026123301985371272, 0.005747126436781658, 0.0031347962382445305, 0.002089864158829724, 0.01253918495297801, 0.004179728317659337, 0.005224660397074143, 0.004179728317659337, 0.00470219435736674, 0.006269592476489061, 0.0036572622779519337, 0.0026123301985371272, 0.006792058516196464, 0.0026123301985371272, 0.008359456635318674, 0.0026123301985371272, 0.008359456635318674, 0.0010449320794148065, 0.0036572622779519337, 0.002089864158829724, 0.004179728317659337, 0.0026123301985371272, 0.0026123301985371272, 0.0026123301985371272, 0.006792058516196464, 0.00470219435736674, 0.00470219435736674, 0.00470219435736674, 0.0031347962382445305, 0.00783699059561127, 0.00783699059561127, 0.0031347962382445305, 0.0010449320794148065, 0.004179728317659337, 0.002089864158829724, 0.0031347962382445305, 0.0031347962382445305, 0.0015673981191222097, 0.002089864158829724, 0.002089864158829724, 0.0010449320794148065, 0.0015673981191222097, 0.0015673981191222097, 0.0031347962382445305, 0.0031347962382445305, 0.004179728317659337, 0.0031347962382445305, 0.0026123301985371272, 0.0010449320794148065, 0.0015673981191222097, 0.0010449320794148065, 0.002089864158829724, 0.0026123301985371272, 0.0026123301985371272, 0.0010449320794148065, 0.0031347962382445305, 0.002089864158829724, 0.0031347962382445305, 0.0010449320794148065, 0.002089864158829724, 0.0015673981191222097, 0.0015673981191222097, 0.0026123301985371272, 0.00470219435736674, 0.004179728317659337, 0.004179728317659337, 0.0010449320794148065, 0.006792058516196464, 0.005747126436781658, 0.008359456635318674, 0.0031347962382445305, 0.004179728317659337, 0.00470219435736674, 0.006792058516196464, 0.006792058516196464, 0.004179728317659337, 0.008881922675026077, 0.006792058516196464, 0.0026123301985371272, 0.005747126436781658, 0.0026123301985371272, 0.0026123301985371272, 0.006269592476489061, 0.00470219435736674, 0.005224660397074143, 0.005747126436781658, 0.00470219435736674, 0.007314524555903867, 0.005747126436781658, 0.006792058516196464, 0.005224660397074143, 0.008881922675026077, 0.0026123301985371272, 0.005224660397074143, 0.005224660397074143, 0.005747126436781658, 0.007314524555903867, 0.0031347962382445305, 0.009404388714733591, 0.005747126436781658, 0.005224660397074143, 0.0031347962382445305, 0.004179728317659337, 0.00470219435736674, 0.008359456635318674, 0.0026123301985371272, 0.0036572622779519337, 0.005224660397074143, 0.0036572622779519337, 0.0036572622779519337, 0.006792058516196464, 0.002089864158829724, 0.008881922675026077, 0.0010449320794148065, 0.0031347962382445305, 0.004179728317659337, 0.0026123301985371272, 0.0031347962382445305, 0.0026123301985371272, 0.00783699059561127, 0.006792058516196464]
tnet = TemporalNetwork(from_edgelist=import_edgelist("/edge-lists/test.txt"), nettype='wd')
degree = networkmeasures.temporal_degree_centrality(tnet)
betweeness = networkmeasures.temporal_betweenness_centrality(tnet)
# tau, p_value = stats.kendalltau(tempreach, betweeness)
print(degree)
